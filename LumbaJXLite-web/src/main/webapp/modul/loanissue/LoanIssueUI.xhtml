<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:define name="content">
        <p:panel header="Loan Issue" closable="true" toggleable="true">
            <h:form prependId="false" id="formeditschedule">
                <p:fieldset collapsed="#{loanissueBean.fieldseteditschedule}" rendered="#{not loanissueBean.fieldseteditschedule}" id="fieldsetedit" toggleable="true" legend="#{msgs.formissue}">
                    <p:panel id="editscheduleissue" >
                        <h:panelGrid columns="3">
                            <h:outputText value="#{msgs.disbursementdate}"/><h:outputText value=" : "/>
                            <p:calendar value="#{loanissueBean.issuenasabah.issuedate}" yearRange="c-120:c+20" navigator="true" readonlyInput="true" pattern="#{loanissueBean.patterndate}"/>
                            <h:outputText value="#{msgs.disbursementamount}"/><h:outputText value=" : "/>
                            <p:inputText value="#{loanissueBean.issuenasabah.issueamount}" disabled="true" >
                                <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                            </p:inputText>
                            <p:commandButton value="#{msgs.edit}" actionListener="#{loanissueBean.editIssue()}" update=":tblpencairan,:formeditschedule" icon="ui-icon ui-icon-pencil"/>
                        </h:panelGrid>
                    </p:panel>
                </p:fieldset>
            </h:form>
            <h:form prependId="false" id="tblpencairan">  
                <p:fieldset rendered="#{not loanissueBean.fieldsetCollapsed}" collapsed="#{loanissueBean.fieldsetCollapsed}" id="fieldsetutama" toggleable="true" legend="#{msgs.formissue}">
                    <h:panelGroup>
                        <p:dataTable value="#{loanissueBean.listissuenasabah}" id="tableListIssue" var="list"
                                     style="text-align: center; width: 500px">
                            <p:column headerText="#{msgs.disbursementdate}">
                                <h:outputText value="#{loanissueBean.convertDate(list.issuedate)}">
                                </h:outputText>
                            </p:column>
                            <p:column headerText="#{msgs.disbursementamount}">
                                <h:outputText value="#{list.issueamount}">
                                    <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                                </h:outputText>
                            </p:column>
                            <p:column>

                                <p:commandButton value="#{msgs.choose}" disabled="#{loanissueBean.checknow(list)}" actionListener="#{loanissueBean.retrieve_issueschedule(list)}" update=":formissue"/>
                            </p:column>
                        </p:dataTable>   
                        <p:commandButton value="#{msgs.Cancel}" actionListener="#{loanissueBean.cancel_select()}" update="@form,:formtabelnasabah,:formissue"/><h:outputText/>
                    </h:panelGroup>
                </p:fieldset>
            </h:form>

            <h:form prependId="false" id="formissue">
                <p:tabView id="tabIssue" rendered="#{loanissueBean.formissuerend}">
                    <p:tab id="general" title="General">
                        <h:panelGroup rendered="#{loanissueBean.formissuerend}">
                            <h:panelGrid columns="8">
                                <h:outputText value="Loan Sequence"/><h:outputText value=" : "/>
                                <p:inputText value="1" disabled="true">
                                </p:inputText><h:outputText value="aaaaaaaaaaaaaaaa" style="color: white"/>
                                <h:outputText value="#{msgs.customerName}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.customer.customername}" disabled="true">
                                </p:inputText><h:outputText/>
                                <h:outputText value="Address"/><h:outputText value=" : "/>
                                <p:inputText  disabled="true">
                                </p:inputText><h:outputText/>
                                <h:outputText value="#{msgs.plafontotal}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.dramount}" disabled="true">
                                    <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                                </p:inputText><h:outputText/>
                                <h:outputText value="#{msgs.referencenumber}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.referencenumber}" disabled="true"/><h:outputText/>
                                <h:outputText value="#{msgs.product}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.loan.loanname}" disabled="true"/><h:outputText/>
                                <h:outputText value="#{msgs.longterm}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.loantermvalue}" disabled="true"/><h:outputText/>
                                <h:outputText value="Repayment Periode"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.loantermvalue}" disabled="true"/><h:outputText/>
                                <h:outputText value="#{msgs.initialdisbursementdate}"/><h:outputText value=" : "/>
                                <p:calendar value="#{loanissueBean.loanissueschedule.issuedate}" pattern="#{loanissueBean.patterndate}" navigator="true" readonlyInput="true" disabled="true"/><h:outputText/>
                                <h:outputText value="#{msgs.initialpaymentdate}"/><h:outputText value=" : "/>
                                <p:calendar value="#{loanissueBean.loanissueschedule.loanapplication.initialpaymentdate}" pattern="#{loanissueBean.patterndate}" navigator="true" readonlyInput="true" disabled="true"/><h:outputText/>
                                <h:outputText value="#{msgs.maturitydate}"/><h:outputText value=" : "/>
                                <p:calendar value="#{loanissueBean.loanissueschedule.loanapplication.maturitydate}" disabled="true" pattern="#{loanissueBean.patterndate}" navigator="true" readonlyInput="true"/><h:outputText/>
                                <h:outputText value="#{msgs.issueDate}"/><h:outputText value=" : "/>
                                <p:calendar value="#{loanissueBean.loanissueschedule.issuedate}" disabled="true" pattern="#{loanissueBean.patterndate}" navigator="true" readonlyInput="true"/><h:outputText/>
                                <h:outputText value="aa" style="color: white"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.interestrate}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.loanapplication.interest}" disabled="true"/><h:outputText/>        
                                <h:outputText value="#{msgs.disbursementamount}"/><h:outputText value=" : "/>
                                <p:inputText value="#{loanissueBean.loanissueschedule.issueamount}"  disabled="true">
                                    <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                                </p:inputText><h:outputText/>

                                <h:outputLabel for="TotalPotongan" value="Total Potongan"/><h:outputText value=" : "/>
                                <p:inputText id="TotalPotongan" disabled="true" style="width: 150px"/>
                                <p:spacer/>
                                <h:outputText value="#{msgs.issuemethod}"/><h:outputText value=" : "/>
                                <p:selectOneMenu value="#{loanissueBean.methodissue}" style="width: 180px">
                                    <f:selectItem itemValue="true" itemLabel="#{msgs.autodebet}" />
                                    <f:selectItem itemValue="false" itemLabel="#{msgs.cash}" />
                                    <p:ajax listener="#{loanissueBean.methodissue()}" update="accountcode"/>
                                </p:selectOneMenu><h:outputText/>
                                <h:outputText value="#{msgs.chooseaccountcode}"/><h:outputText value=" : "/>
                                <p:selectOneMenu id="accountcode" value="#{loanissueBean.loanissueschedule.issuedtoaccountid}" disabled="#{(not loanissueBean.methodissue)}" style="width: 180px">
                                    <f:selectItems value="#{loanissueBean.accountcode}" var="rekening" itemValue="#{rekening.accountid}" itemLabel="#{rekening.accountcode}" />
                                </p:selectOneMenu><h:outputText/>
                            </h:panelGrid>
                            <br/>
                            <h:panelGroup id="pnlgrpfeelist" rendered="#{loanissueBean.loanissueschedule.statusFee != 'paid'}">
                                <p:dataTable value="#{loanissueBean.listfeeselected}" var="fee" style="text-align: center">
                                    <p:column headerText="#{msgs.feeName}">
                                        <h:outputText value="#{fee.feename}"/>
                                    </p:column>
                                    <p:column headerText="#{msgs.feeValue}">
                                        <h:outputText value="#{fee.feevalue}">
                                            <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            </h:panelGroup>
                            <br/>
                            <h:panelGrid columns="2">
                                <p:panel toggleable="true" toggleSpeed="500" >
                                    <h:panelGrid columns="3">               
                                        <h:outputLabel for="biayaperangsuran" value="Apakah dikenakan biaya per angsuran?"/>
                                        <p:selectOneRadio id="biayaperangsuran">
                                            <f:selectItem itemValue="1" itemLabel="Ya"/>
                                            <f:selectItem itemValue="2" itemLabel="Tidak"/>
                                        </p:selectOneRadio>
                                        <p:spacer/>
                                        <h:outputText value="Pilih biaya"/>
                                        <p:selectOneMenu id="Pilihbiaya" value="#{loanissueBean.varfee.feeid}" style="width: 180px" >
                                            <f:selectItem itemValue="0" itemLabel="pilih"/>
                                            <f:selectItems value="#{loanissueBean.listfee}" var="feecombo" itemValue="#{feecombo.feeid}" itemLabel="#{feecombo.feename}"/>
                                        </p:selectOneMenu>
                                        <p:commandButton value="Tambah"/>
                                        <h:outputLabel for="Totalbiayaperangsuran" value="Total biaya per angsuran"/>
                                        <p:inputText id="Totalbiayaperangsuran" disabled="true" style="width: 150px"/>
                                        <p:spacer/>
                                    </h:panelGrid>
                                </p:panel>
                            </h:panelGrid>

                            <p:panelGrid style="width: 100%; margin-top:20px">
                                <f:facet name="header">
                                    <p:row>
                                        <p:column><h:outputText value="No"/></p:column>
                                        <p:column><h:outputText value="Nama Titipan"/></p:column>
                                        <p:column><h:outputText value="Nominal"/></p:column>
                                        <p:column><h:outputText value="Checklist"/></p:column>
                                    </p:row>
                                </f:facet>
                                <p:row>
                                    <p:column><h:outputText value="1"/></p:column>
                                    <p:column><h:outputText value="Titipan Angsuran"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="2"/></p:column>
                                    <p:column><h:outputText value="Titipan Biaya Notaris"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="3"/></p:column>
                                    <p:column><h:outputText value="Titipan Kas Sementara"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="4"/></p:column>
                                    <p:column><h:outputText value="Titipan Bank"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="5"/></p:column>
                                    <p:column><h:outputText value="Titipan Pengurusan STNK"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="6"/></p:column>
                                    <p:column><h:outputText value="Titipan Kekurangan Berkas"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="7"/></p:column>
                                    <p:column><h:outputText value="Titipan Biaya Perpanjangan"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="8"/></p:column>
                                    <p:column><h:outputText value="Titipan Balik Nama BPKB"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="9"/></p:column>
                                    <p:column><h:outputText value="Titipan Balik Nama SHM"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="10"/></p:column>
                                    <p:column><h:outputText value="Titipan Advance / Arears"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><h:outputText value="11"/></p:column>
                                    <p:column><h:outputText value="Titipan Lainnya"/></p:column>
                                    <p:column><h:outputText value="Rp."/></p:column>
                                    <p:column style="text-align: center"><p:selectBooleanCheckbox/></p:column>
                                </p:row>
                            </p:panelGrid>
                            <h:panelGroup >
                                <p:dataTable value="" var="fee" style="text-align: center">
                                    <p:column headerText="#{msgs.feeName}">
                                        <h:outputText />
                                    </p:column>
                                    <p:column headerText="nominal biaya per angsuran">
                                        <pe:inputNumber symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                                    </p:column>
                                    <p:column headerText="#{msgs.delete}">
                                        <p:commandButton icon="ui-icon ui-icon-trash" title="#{msgs.deleteButton}" actionListener="#{loanissueBean.deletefeelist(fee)}" process="@this"/>
                                    </p:column>
                                </p:dataTable>
                            </h:panelGroup>
                            <br/>
                            <h:panelGroup id="tblJaminan">
                                <p:dataTable
                                    id="dtJaminan"
                                    value="" 
                                    var="jaminanlist"
                                    paginator="true"
                                    paginatorPosition="bottom"
                                    rows="10"
                                    rowsPerPageTemplate="10,20,50"
                                    sortOrder="descending"
                                    >
                                    <p:column>
                                        <f:facet name="header"><h:outputText value="Jaminan Ke-"/></f:facet>
                                        <h:outputText value=""/>
                                    </p:column>
                                    <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                        <f:facet name="header"><h:outputText value="Jaminan yang diberikan"/></f:facet>
                                        <h:outputText value=""/>
                                    </p:column>
                                    <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                        <f:facet name="header"><h:outputText value="Bentuk Jaminan"/></f:facet>
                                        <h:outputText value=""/>
                                    </p:column>
                                    <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                        <f:facet name="header"><h:outputText value="Nilai Jaminan"/></f:facet>
                                        <h:outputText value=""/>
                                    </p:column>

                                    <p:column style="width: 70px;">
                                        <p:commandButton icon="ui-icon ui-icon-search" title="Detail Jaminan" onclick="DetailJaminan.show()"/>
                                    </p:column>
                                </p:dataTable>
                            </h:panelGroup>
                            <p:commandButton value="#{msgs.disbursementissue}" actionListener="#{loanissueBean.submit_issue()}" update=":formissue,:formtabelnasabah,:dialog,:tblpencairan"/><h:outputText/>
                            <p:commandButton value="#{msgs.Cancel}" actionListener="#{loanissueBean.cancel_issue()}" update=":formissue,:formtabelnasabah"/><h:outputText/>

                        </h:panelGroup>
                    </p:tab>
                    <p:tab id="schedule" title="Schedule">
                        <h:panelGroup id="tblSchedule">
                            <p:dataTable
                                id="dtSchedule"
                                value="" 
                                var="Schedulelist"
                                sortOrder="descending"
                                >
                                <p:column>
                                    <f:facet name="header"><h:outputText value="Periode"/></f:facet>
                                    <h:outputText value=""/>
                                    <br/>
                                </p:column>
                                <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                    <f:facet name="header"><h:outputText value="Jumlah angsuran"/></f:facet>
                                    <h:outputText value=""/>
                                </p:column>
                                <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                    <f:facet name="header"><h:outputText value="Pokok"/></f:facet>
                                    <h:outputText value=""/>
                                </p:column>
                                <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                    <f:facet name="header"><h:outputText value="bunga"/></f:facet>
                                    <h:outputText value=""/>
                                </p:column>
                                <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                    <f:facet name="header"><h:outputText value="Biaya"/></f:facet>
                                    <h:outputText value=""/>
                                </p:column>
                                <p:column sortBy="" filterBy="" filterMatchMode="contains"  >
                                    <f:facet name="header"><h:outputText value="Saldo"/></f:facet>
                                    <h:outputText value=""/>
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>
                    </p:tab>
                </p:tabView>
            </h:form>

            <h:form prependId="false" id="formtabelnasabah">
                <p:panel style="border: white" rendered="#{loanissueBean.fieldsetCollapsed}">
                    <p:dataTable value="#{loanissueBean.daftarnasabah}" var="daftar" style="text-align: center">
                        <p:column headerText="#{msgs.referencenumber}" filterBy="#{daftar.referencenumber}">
                            <h:outputText value="#{daftar.referencenumber}"/>
                        </p:column>
                        <p:column headerText="#{msgs.customername}" filterBy="#{daftar.loanapplication.customer.firstName}" filterMatchMode="contains">
                            <h:outputText value="#{daftar.loanapplication.customer.firstName}"/>
                        </p:column>
                        <p:column headerText="#{msgs.customernumber}" filterBy="#{daftar.loanapplication.customer.customerCode}" filterMatchMode="contains">
                            <h:outputText value="#{daftar.loanapplication.customer.customerCode}"/>
                        </p:column>
                        <p:column headerText="#{msgs.product}" filterBy="#{daftar.loanapplication.loan.loanname}" filterMatchMode="contains">
                            <h:outputText value="#{daftar.loanapplication.loan.loanname}"/>
                        </p:column>
                        <p:column headerText="#{msgs.disbursementdate}">
                            <h:outputText value="#{daftar.issuedate}"/>
                        </p:column>
                        <p:column headerText="Jumlah yang Dicairkan">
                            <h:outputText value="#{daftar.issueamount}">
                                <f:convertNumber currencySymbol="#{loanissueBean.currencySimbol}" type="currency" maxFractionDigits="#{loanissueBean.maxfraction}"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="#{msgs.Show}">
                            <p:commandButton icon="ui-icon ui-icon-search" title="#{msgs.Show}" actionListener="#{loanissueBean.edit(daftar)}" update=":tblpencairan,@form"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
            <h:form id="dialog" >
                <p:dialog header="Warning" widgetVar="warn" id="warn" modal="true" showEffect="explode" hideEffect="explode" >
                    <center>
                        <h:outputText value="#{loanissueBean.warningText}"/>
                        <br/>
                        <p:commandButton value="OK" oncomplete="warn.hide()" />
                    </center>
                </p:dialog>
                <p:dialog header="Information" widgetVar="success" id="success" modal="true" showEffect="explode" hideEffect="explode" >
                    <center>
                        <h:outputText value="#{loanissueBean.warningText}"/>
                        <br/>
                        <p:commandButton value="OK" oncomplete="success.hide()" />
                    </center>
                </p:dialog>
            </h:form>
            <h:form id="viewDialog" prependId="false">
                <p:dialog header="Rincian Penghasilan Bersih Tiap Bulan" widgetVar="rincianPenghasilan" id="rincianPenghasilan" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGrid columns="3" id="pgrincianPenghasilan">
                        <p:spacer/>
                        <p:selectOneRadio id="pekerjaanNasabah" >
                            <f:selectItem itemLabel="Pekerjaan Utama" itemValue="1"/>
                            <f:selectItem itemLabel="Pekerjaan Tambahan" itemValue="2"/>
                        </p:selectOneRadio>
                        <p:spacer/>
                        <h:outputLabel for="bidangUsaha" value="Bidang Usaha"/>
                        <p:selectOneMenu id="bidangUsaha" style="width: 155px">
                            <f:selectItem itemLabel="Pilih Bidang Usaha" itemValue="1"/>
                        </p:selectOneMenu>
                        <p:spacer/>
                        <h:outputLabel for="siklusUsaha" value="Siklus usaha"/>
                        <p:selectOneMenu id="siklusUsaha" style="width: 155px">
                            <f:selectItem itemLabel="Pilih Siklus Usaha" itemValue="1"/>
                        </p:selectOneMenu>
                        <p:spacer/>
                        <h:outputLabel for="jenisUsaha" value="Jenis usaha"/>
                        <p:selectOneMenu id="jenisUsaha" style="width: 155px">
                            <f:selectItem itemLabel="Pilih Jenis Usaha" itemValue="1"/>
                        </p:selectOneMenu>
                        <p:spacer/>                              
                        <h:outputLabel for="penghasilanBersihSiklusUsaha" value="Penghasilan bersih per-siklus usaha"/>
                        <pe:inputNumber id="penghasilanBersihSiklusUsaha" symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                        <p:spacer/>
                        <h:outputLabel for="penghasilanbersihperbulan" value="Penghasilan bersih per-bulan"/>
                        <pe:inputNumber id="penghasilanbersihperbulan" symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                        <p:spacer/>
                        <h:outputLabel for="perincianPenghasilanBersih" value="Perincian dari penghasilan bersih"/>
                        <p:inputTextarea id="perincianPenghasilanBersih" style="width: 150px"/>
                        <p:spacer/>
                        <p:commandButton id="btnRincianPenghasilan" value="Tambah"/>
                    </h:panelGrid>
                    <h:panelGroup id="pnltabelRincianPenghasilan">
                        <p:dataTable 
                            value="" 
                            id="tabelRincianPenghasilan" 
                            widgetVar="tabel" 
                            emptyMessage="Data Masih Kosong"
                            var="rincianBiayaHiduplist" >
                            <p:column>
                                <f:facet name="header"><h:outputText value="Tipe Pekerjaan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Bidang Usaha"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Siklus Usaha"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Penghasilan Per siklus usaha"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Penghasilan bersih per bulan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Hapus / Edit Rincian Penghasilan"/></f:facet>
                                <p:commandButton icon="ui-icon ui-icon-trash" title="Hapus"/>
                                <p:commandButton icon="ui-icon ui-icon-pencil" title="Ubah"/>
                            </p:column>
                            <f:facet name="footer">
                                <h:outputText value="TOTAL Penghasilan bersih"/> 
                                <p:inputText value="Rp." disabled="true" style="width: 100px"/>
                                <p:inputText value="Rp." disabled="true" style="width: 100px"/>
                            </f:facet>
                        </p:dataTable>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Tambah Jaminan" widgetVar="TambahJaminan" id="TambahJaminan" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGroup id="panelJaminan">
                        <h:panelGrid columns="6" styleClass="grid" >
                            <h:outputText value="Tipe Jaminan" />
                            <p:selectOneMenu value="#{loanaccountBean.tipejaminan}" style="width: 150px">
                                <!-- <f:selectItem itemValue="Perumahan" itemLabel="Perumahan" /> -->
                                <f:selectItem itemValue="Rumah" itemLabel="Tempat Tinggal" />
                                <f:selectItem itemValue="Tanah" itemLabel="Tanah" />
                                <f:selectItem itemValue="Komersial" itemLabel="Komersial" />
                                <f:selectItem itemValue="Kas" itemLabel="Kas" />
                                <f:selectItem itemValue="Asuransi" itemLabel="Asuransi" />
                                <f:selectItem itemValue="Emas" itemLabel="Emas" />
                                <f:selectItem itemValue="Kendaraan" itemLabel="Kendaraan" />
                                <f:selectItem itemValue="Surat Berharga" itemLabel="Surat Berharga" />
                                <p:ajax update="detailJaminan,srtkepemilikan"/>
                            </p:selectOneMenu><h:outputText />

                            <h:outputText value="Detail Jaminan" />
                            <p:selectOneMenu value="#{loanaccountBean.collateral.collateralParameter.collateralparameterid}" id="detailJaminan" style="width: 150px">
                                <f:selectItem itemValue="0" itemLabel="Pilih Detail Jaminan" />
                                <f:selectItems value="#{loanaccountBean.collateralParameters}" var="jaminan" itemValue="#{jaminan.collateralparameterid}" itemLabel="#{jaminan.collateralparameterdetail}" />
                            </p:selectOneMenu><h:outputText />

                            <h:outputText value="Surat Kepemilikan" />
                            <p:selectOneMenu  value="#{loanaccountBean.collateral.letterofownershiptype.letterofownershiptypeid}" id="srtkepemilikan" style="width: 150px">
                                <f:selectItem itemValue="0" itemLabel="Pilih Surat Kepemilikan" />
                                <f:selectItems value="#{loanaccountBean.letterofownershiptypes}" var="sKepemilikan" itemValue="#{sKepemilikan.letterofownershiptypeid}" itemLabel="#{sKepemilikan.letterofownershiptypename}" />
                            </p:selectOneMenu><h:outputText />
                            <h:outputText value="Nama Pemilik"/>
                            <p:inputText value="#{loanaccountBean.collateral.collateralOwnershipletter.ownername}" style="width: 150px"/><h:outputText />

                            <h:outputText value="Nilai Pasar Wajar Agunan"/>
                            <p:inputText value="#{loanaccountBean.collateral.realizationfairmarketvalue}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Rasio NPW terhadap Plafon"/>
                            <p:inputText value="#{loanaccountBean.collateral.ratiofairmarketvalueandplafond}" style="width: 150px"/><h:outputText />

                            <h:outputText value="Nilai Taksir Sementara"/>
                            <p:inputText value="#{loanaccountBean.collateral.collateralAppraisal.appraisedvalue}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Nilai Realisasi"/>
                            <p:inputText value="#{loanaccountBean.collateral.realizationvalue}" style="width: 150px">
                            </p:inputText><h:outputText />

                            <h:outputText value="Biaya Tetap"/>
                            <p:inputText value="#{loanaccountBean.collateral.fixedfee}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Nilai Bersih"/>
                            <p:inputText value="#{loanaccountBean.collateral.netvalue}" style="width: 150px">
                            </p:inputText><h:outputText />

                            <h:outputText value="Nilai Jual Objek Pajak (NJOP)" />
                            <p:inputText value="#{loanaccountBean.collateral.taxobjectsalevalue}" style="width: 150px" >
                            </p:inputText><h:outputText />
                            <h:outputText value="Gunakan Asuransi" />
                            <p:selectOneRadio value="#{loanaccountBean.collateral.useinsurance}" >
                                <f:selectItem itemValue="true" itemLabel="Ya"/>
                                <f:selectItem itemValue="false" itemLabel="Tidak" />
                            </p:selectOneRadio>
                            <h:outputText />

                            <h:outputText value="Gunakan Paripasu" />
                            <p:selectOneRadio value="#{loanaccountBean.collateral.useparipasu}" >
                                <f:selectItem itemValue="true" itemLabel="Ya"/>
                                <f:selectItem itemValue="false" itemLabel="Tidak" />
                            </p:selectOneRadio>
                            <h:outputText />
                            <h:outputText /><h:outputText /><h:outputText />

                            <p:commandButton value="#{msgs.add}" rendered="#{loanaccountBean.statusCollateral != 'edit'}" action="#{loanaccountBean.insert_collateral()}" /><h:outputText /><h:outputText />
                        </h:panelGrid>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Detail Jaminan" widgetVar="DetailJaminan" id="DetailJaminan" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGroup id="panelJaminan1">
                        <h:panelGrid columns="6" styleClass="grid" >
                            <h:outputText value="Tipe Jaminan" />
                            <p:selectOneMenu disabled="true"  value="#{loanaccountBean.tipejaminan}" style="width: 150px">
                                <!-- <f:selectItem itemValue="Perumahan" itemLabel="Perumahan" /> -->
                                <f:selectItem itemValue="Rumah" itemLabel="Tempat Tinggal" />
                                <f:selectItem itemValue="Tanah" itemLabel="Tanah" />
                                <f:selectItem itemValue="Komersial" itemLabel="Komersial" />
                                <f:selectItem itemValue="Kas" itemLabel="Kas" />
                                <f:selectItem itemValue="Asuransi" itemLabel="Asuransi" />
                                <f:selectItem itemValue="Emas" itemLabel="Emas" />
                                <f:selectItem itemValue="Kendaraan" itemLabel="Kendaraan" />
                                <f:selectItem itemValue="Surat Berharga" itemLabel="Surat Berharga" />
                                <p:ajax update="detailJaminan1,srtkepemilikan1"/>
                            </p:selectOneMenu><h:outputText />

                            <h:outputText value="Detail Jaminan" />
                            <p:selectOneMenu disabled="true"  value="#{loanaccountBean.collateral.collateralParameter.collateralparameterid}" id="detailJaminan1" style="width: 150px">
                                <f:selectItem itemValue="0" itemLabel="Pilih Detail Jaminan" />
                                <f:selectItems value="#{loanaccountBean.collateralParameters}" var="jaminan" itemValue="#{jaminan.collateralparameterid}" itemLabel="#{jaminan.collateralparameterdetail}" />
                            </p:selectOneMenu><h:outputText />

                            <h:outputText value="Surat Kepemilikan" />
                            <p:selectOneMenu  disabled="true"  value="#{loanaccountBean.collateral.letterofownershiptype.letterofownershiptypeid}" id="srtkepemilikan1" style="width: 150px">
                                <f:selectItem itemValue="0" itemLabel="Pilih Surat Kepemilikan" />
                                <f:selectItems value="#{loanaccountBean.letterofownershiptypes}" var="sKepemilikan" itemValue="#{sKepemilikan.letterofownershiptypeid}" itemLabel="#{sKepemilikan.letterofownershiptypename}" />
                            </p:selectOneMenu><h:outputText />
                            <h:outputText value="Nama Pemilik"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.collateralOwnershipletter.ownername}" style="width: 150px"/><h:outputText />

                            <h:outputText value="Nilai Pasar Wajar Agunan"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.realizationfairmarketvalue}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Rasio NPW terhadap Plafon"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.ratiofairmarketvalueandplafond}" style="width: 150px"/><h:outputText />

                            <h:outputText value="Nilai Taksir Sementara"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.collateralAppraisal.appraisedvalue}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Nilai Realisasi"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.realizationvalue}" style="width: 150px">
                            </p:inputText><h:outputText />

                            <h:outputText value="Biaya Tetap"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.fixedfee}" style="width: 150px">
                            </p:inputText><h:outputText />
                            <h:outputText value="Nilai Bersih"/>
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.netvalue}" style="width: 150px">
                            </p:inputText><h:outputText />

                            <h:outputText value="Nilai Jual Objek Pajak (NJOP)" />
                            <p:inputText disabled="true"  value="#{loanaccountBean.collateral.taxobjectsalevalue}" style="width: 150px" >
                            </p:inputText><h:outputText />
                            <h:outputText value="Gunakan Asuransi" />
                            <p:selectOneRadio value="#{loanaccountBean.collateral.useinsurance}" disabled="true" >
                                <f:selectItem itemValue="true" itemLabel="Ya"/>
                                <f:selectItem itemValue="false" itemLabel="Tidak" />
                            </p:selectOneRadio>
                            <h:outputText />

                            <h:outputText value="Gunakan Paripasu"/>
                            <p:selectOneRadio value="#{loanaccountBean.collateral.useparipasu}" disabled="true" >
                                <f:selectItem itemValue="true" itemLabel="Ya"/>
                                <f:selectItem itemValue="false" itemLabel="Tidak" />
                            </p:selectOneRadio>
                            <h:outputText />
                            <h:outputText /><h:outputText /><h:outputText />


                        </h:panelGrid>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Rincian Biaya Hidup" widgetVar="rincianBiayaHidup" id="rincianBiayaHidup" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGrid columns="3" id="pgrincianBiayaHidup">
                        <h:outputLabel for="anggotaKeluarga" value="Anggota Keluarga"/>
                        <p:selectOneMenu id="anggotaKeluarga" style="width: 155px">
                            <f:selectItem itemLabel="Suami/Istri" itemValue="1"/>
                            <f:selectItem itemLabel="Anak 1" itemValue="2"/>
                        </p:selectOneMenu>
                        <p:spacer/>
                        <h:outputLabel for="pendidikanTerakhir" value="Pendidikan Terakhir"/>
                        <p:selectOneMenu id="pendidikanTerakhir" style="width: 155px">
                            <f:selectItem itemLabel="SD" itemValue="1"/>
                            <f:selectItem itemLabel="SMP" itemValue="2"/>
                            <f:selectItem itemLabel="SMA" itemValue="3"/>
                        </p:selectOneMenu>
                        <p:spacer/>
                        <p:spacer/>
                        <p:selectOneRadio id="statusKerja" >
                            <f:selectItem itemLabel="Sudah Bekerja" itemValue="1"/>
                            <f:selectItem itemLabel="Belum Bekerja" itemValue="2"/>
                        </p:selectOneRadio>
                        <p:spacer/>
                        <h:outputLabel for="JenisPekerjaan" value="Jenis Pekerjaan"/>
                        <p:inputText id="JenisPekerjaan" style="width: 150px"/>
                        <p:spacer/>
                        <h:outputLabel for="BiayaperBulan" value="Biaya per Bulan"/>
                        <pe:inputNumber id="BiayaperBulan" symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                        <p:spacer/>
                        <p:commandButton id="btnrincianBiayaHidup" value="Tambah"/>
                    </h:panelGrid>
                    <h:panelGroup id="pnltabelrincianBiayaHidup">
                        <p:dataTable 
                            value="" 
                            id="tabelrincianBiayaHidup" 
                            widgetVar="tabel" 
                            emptyMessage="Data Masih Kosong"
                            var="rincianBiayaHiduplist" >
                            <p:column>
                                <f:facet name="header"><h:outputText value="Anggota Keluarga"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Pendidikan terakhir"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Jenis Pekerjaan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Biaya per Bulan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"></f:facet>
                                <p:commandButton icon="ui-icon ui-icon-trash" title="Hapus"/>
                                <p:commandButton icon="ui-icon ui-icon-pencil" title="Ubah"/>
                            </p:column>
                            <f:facet name="footer">
                                <h:outputText value="TOTAL biaya hidup per anggota keluarga"/> 
                                <p:inputText value="Rp." disabled="true" style="width: 100px"/>
                            </f:facet>
                        </p:dataTable>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Rincian Cicilan" widgetVar="RincianCicilan" id="RincianCicilan" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGrid columns="3" id="pgRincianCicilan">
                        <h:outputLabel for="NamaCicilan" value="Nama Cicilan"/>
                        <p:inputText id="NamaCicilan" style="width: 150px"/>
                        <p:spacer/>
                        <h:outputLabel for="Besarcicilan" value="Besar cicilan"/>
                        <pe:inputNumber id="Besarcicilan" symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                        <p:spacer/>
                        <p:commandButton id="btnRincianCicilan" value="Tambah"/>
                    </h:panelGrid>
                    <h:panelGroup id="pnltabelRincianCicilan">
                        <p:dataTable 
                            value="" 
                            id="tabelRincianCicilan" 
                            widgetVar="tabel" 
                            emptyMessage="Data Masih Kosong"
                            var="RincianCicilanlist" >
                            <p:column>
                                <f:facet name="header"><h:outputText value="nama cicilan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="besar cicilan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"></f:facet>
                                <p:commandButton icon="ui-icon ui-icon-trash" title="Hapus"/>
                                <p:commandButton icon="ui-icon ui-icon-pencil" title="Ubah"/>
                            </p:column>
                            <f:facet name="footer">
                                <h:outputText value="TOTAL cicilan"/> 
                                <p:inputText value="Rp." disabled="true" style="width: 100px"/>
                            </f:facet>
                        </p:dataTable>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Rincian Biaya Rumah Tangga" widgetVar="RincianBiayaRumahTangga" id="RincianBiayaRumahTangga" modal="true" showEffect="explode" hideEffect="explode" >
                    <h:panelGrid columns="3" id="pgRincianBiayaRumahTangga">
                        <h:outputLabel for="NamaBiaya" value="Nama Biaya"/>
                        <p:inputText id="NamaBiaya" style="width: 150px"/>
                        <p:spacer/>
                        <h:outputLabel for="BiayaperBulanTangga" value="Biaya per Bulan"/>
                        <pe:inputNumber id="BiayaperBulanTangga" symbol="#{appBean.systemGlobal.currency.currencySymbol}" decimalPlaces="#{appBean.systemGlobal.curUsedecimals ? appBean.systemGlobal.curDigitdecimals : 0}" thousandSeparator="." decimalSeparator="," maxValue="999999999999999" style="width: 150px"/>
                        <p:spacer/>
                        <p:commandButton id="btnRincianBiayaRumahTangga" value="Tambah"/>
                    </h:panelGrid>
                    <h:panelGroup id="pnltabelRincianBiayaRumahTangga">
                        <p:dataTable 
                            value="" 
                            id="tabelRincianBiayaRumahTangga" 
                            widgetVar="tabel" 
                            emptyMessage="Data Masih Kosong"
                            var="RincianBiayaRumahTanggalist" >
                            <p:column>
                                <f:facet name="header"><h:outputText value="Nama Biaya"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"><h:outputText value="Biaya per Bulan"/></f:facet>
                                <h:outputText value=""/>
                            </p:column>
                            <p:column>
                                <f:facet name="header"></f:facet>
                                <p:commandButton icon="ui-icon ui-icon-trash" title="Hapus"/>
                                <p:commandButton icon="ui-icon ui-icon-pencil" title="Ubah"/>
                            </p:column>
                            <f:facet name="footer">
                                <h:outputText value="TOTAL biaya Rumah Tangga"/> 
                                <p:inputText value="Rp." disabled="true" style="width: 100px"/>
                            </f:facet>
                        </p:dataTable>
                    </h:panelGroup>
                </p:dialog>
                <p:dialog header="Daftar Nasabah" widgetVar="nasabah" id="daftarnasabah" modal="true" showEffect="explode" hideEffect="explode" >
                    <p:dataTable
                        id="nasabahlist"
                        emptyMessage="Nasabah Tidak Ditemukan"
                        value="#{loanaccountBean.listCustomer}"
                        var="customerlist"
                        paginator="true"
                        paginatorPosition="bottom"
                        rows="10"
                        rowsPerPageTemplate="10,20,50"
                        sortOrder="descending"
                        >
                        <f:facet name="header">Daftar Nasabah</f:facet>

                        <p:column sortBy="#{customerlist.customerCode}" filterBy="#{customerlist.customerCode}" filterMatchMode="contains" >
                            <f:facet name="header"><h:outputText value="Nomor CIF"/></f:facet>
                            <h:outputText value="#{customerlist.customerCode}"/>
                        </p:column>

                        <p:column sortBy="#{customerlist.customername}" filterBy="#{customerlist.customername}" filterMatchMode="contains"  >
                            <f:facet name="header"><h:outputText value="Nama Nasabah"/></f:facet>
                            <h:outputText value="#{customerlist.customername}"/>
                        </p:column>

                        <p:column style="width: 70px;">
                            <p:commandButton update=":viewDialog" icon="ui-icon ui-icon-search" onclick="nasabah.hide();"/>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
            </h:form>
        </p:panel>
    </ui:define>

</ui:composition>