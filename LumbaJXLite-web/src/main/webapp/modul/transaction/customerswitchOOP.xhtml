<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../template.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="content">
        <p:panel header="#{msgs.customerswitch}" closable="true" toggleSpeed="500" closeSpeed="500">
            <h:form id="CariCIF">
                <p:panel style="border: white">
                    <h:panelGrid columns="8">
                        <h:outputText value="#{msgs.customernumber}*"/>
                        <h:outputText value=" : "/>
                        <p:inputText value="#{customerswitch.customer.customercode}">
                            <p:ajax event="keyup" update=":CariCIF:btnlihat" process="@this"/>
                        </p:inputText>
                        <p:commandButton icon="ui-icon ui-icon-search" actionListener="#{customerswitch.search()}"
                                         update=":ListCustomer"
                                         disabled="#{customerswitch.customer.customername!=null}"/>

                        <p:spacer width="100" height="0"/>

                        <h:outputText value="#{msgs.chooseofficeposition}*"/>
                        <h:outputText value=" : "/>
                        <p:selectOneMenu id="officeposition" label="#{msgs.chooseofficeposition}" value="#{customerswitch.masterOperational.officetype}"  style="width: 150px">
                            <f:selectItem itemLabel="#{msgs.chooseoneposition}" itemValue="0"/>                            
                            <f:selectItem itemLabel="#{msgs.headoffice}" itemValue="1"/>                            
                            <f:selectItem itemLabel="#{msgs.region}" itemValue="2"/>                            
                            <f:selectItem itemLabel="#{msgs.branch}" itemValue="3"/>                            
                            <f:selectItem itemLabel="#{msgs.subbranch}" itemValue="4"/>
                            <p:ajax update=":CariCIF:listkantor :CariCIF:btnlihat"/>
                        </p:selectOneMenu>

                        <h:outputText value="#{msgs.customername}"/>
                        <h:outputText value=" : "/>
                        <p:inputText value="#{customerswitch.customer.customername}" disabled="true"/>
                        <h:outputText/>

                        <h:outputText/>

                        <h:outputText value="Ditransfer ke kantor*"/>
                        <h:outputText value=" : "/>
                        <h:panelGroup id="listkantor">
                            <p:selectOneMenu rendered="#{customerswitch.masterOperational.officetype=='0'}" disabled="true">
                                <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{customerswitch.headOffice.headofficeid}" rendered="#{customerswitch.masterOperational.officetype=='1'}" >
                                <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                <f:selectItems value="#{customerswitch.comboHeadOffice}" var="headoffice" itemLabel="#{headoffice.headofficename}" itemValue="#{headoffice.headofficeid}"/>                                
                                <p:ajax update=":CariCIF:btnlihat"/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{customerswitch.region.regionID}" rendered="#{customerswitch.masterOperational.officetype=='2'}" >
                                <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                <f:selectItems value="#{customerswitch.comboRegion}" var="region" itemLabel="#{region.regionName}" itemValue="#{region.regionID}"/>
                                <p:ajax update=":CariCIF:btnlihat"/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{customerswitch.branch.branchid}" rendered="#{customerswitch.masterOperational.officetype=='3'}" >
                                <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                <f:selectItems value="#{customerswitch.comboBranch}" var="branch" itemLabel="#{branch.branchname}" itemValue="#{branch.branchid}"/>
                                <p:ajax update=":CariCIF:btnlihat"/>
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{customerswitch.subBranchUnitCo.subbranchunitcoid}" rendered="#{customerswitch.masterOperational.officetype=='4'}" >
                                <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                <f:selectItems value="#{customerswitch.comboSubBranchUnitCo}" var="subbranch" itemLabel="#{subbranch.subbranchunitconame}" itemValue="#{subbranch.subbranchunitcoid}"/>
                                <p:ajax update=":CariCIF:btnlihat"/>
                            </p:selectOneMenu>
                        </h:panelGroup>

                        <h:outputText value="#{msgs.office}"/>
                        <h:outputText value=" : "/>
                        <p:inputText value="#{customerswitch.customer.customeroffice}" disabled="true"/><h:outputText/>

                        <h:outputText/>

                        <h:outputText value="#{msgs.reason}*"/>
                        <h:outputText value=" : "/>
                        <p:selectOneMenu value="#{customerswitch.reason.reasonid}" style="width: 150px" id="alas" label="#{msgs.reason}">
                            <f:selectItem itemLabel="#{msgs.chooseonereason}" itemValue=""/>
                            <f:selectItems value="#{customerswitch.comboReason}" var="alasan" itemLabel="#{alasan.reason}" itemValue="#{alasan.reasonid}"/>
                            <p:ajax update=":CariCIF:btnlihat"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton value="Lihat" disabled="#{customerswitch.reason.reasonid==null or (customerswitch.headOffice.headofficeid==null and customerswitch.region.regionID==null
                                                               and customerswitch.branch.branchid == null and customerswitch.subBranchUnitCo.subbranchunitcoid == null)
                                                               }" id="btnlihat"
                                     actionListener="#{customerswitch.setListRekeningTransferCabang(true)}" update=":CariCIF,:ListRekening:tabellistrekening"/>
                </p:panel>
            </h:form>

            <h:form id="ListCustomer">
                <p:dialog widgetVar="vardaftarcustomer" modal="true">
                    <p:dataTable value="#{customerswitch.listsearch}" var="daftarcustomer" paginator="true" rows="5">
                        <p:column headerText="#{msgs.customernumber}" filterBy="#{daftarcustomer.customercode}" filterMatchMode="contains">
                            #{daftarcustomer.customercode}
                        </p:column>
                        <p:column headerText="#{msgs.customername}" filterBy="#{daftarcustomer.customername}" filterMatchMode="contains">
                            #{daftarcustomer.customername}
                        </p:column>
                        <p:column headerText="#{msgs.socialsecuritynumber}" filterBy="#{daftarcustomer.person.socialsecuritynumber}" filterMatchMode="contains">
                            #{daftarcustomer.person.socialsecuritynumber}
                        </p:column>
                        <p:column headerText="#{msgs.office}" filterMatchMode="contains">
                            #{daftarcustomer.customeroffice}
                        </p:column>
                        <p:column>
                            <p:commandButton icon="ui-icon ui-icon-search" title="#{msgs.Search}"                                         
                                             onclick="vardaftarcustomer.hide()"
                                             actionListener="#{customerswitch.trim_customer(daftarcustomer.customerid)}"
                                             update=":CariCIF"/>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
            </h:form>

            <h:form id="ListRekening">
                <p:panel id="tabellistrekening" visible="#{customerswitch.listRekeningTransferCabang}" style="border: white">
                    <p:dataTable>
                        <f:facet name="header">
                            <h:outputText value="#{msgs.accountlist}"/>
                        </f:facet>
                        <p:column headerText="#{msgs.acccountnumber}">

                        </p:column>
                        <p:column headerText="#{msgs.beginningbalance}">

                        </p:column>
                        <p:column headerText="#{msgs.debit}">

                        </p:column>
                        <p:column headerText="#{msgs.credit}">

                        </p:column>
                        <p:column headerText="#{msgs.endbalance}">

                        </p:column>
                        <f:facet name="footer">
                            <p:commandButton value="#{msgs.transfer2}" onclick="confirmtransfercabang.show()"/>
                        </f:facet>
                    </p:dataTable>
                </p:panel>
                <p:confirmDialog message="#{msgs.areyousurewanttotransferallyouraccounts}?" widgetVar="confirmtransfercabang">
                    <p:commandButton value="#{msgs.yes}" onclick="confirmberhasiltransfercabang.show(),confirmtransfercabang.hide()"/>
                    <p:commandButton value="#{msgs.no}" type="reset">
                        <p:ajax oncomplete="confirmtransfercabang.hide()"/>
                    </p:commandButton>                    
                </p:confirmDialog>                
                <p:confirmDialog message="#{msgs.allaccountshavesuccesfullytransfered}" widgetVar="confirmberhasiltransfercabang">
                    <p:commandButton value="OK" onclick="confirmberhasiltransfercabang.hide()"/>
                </p:confirmDialog>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>