<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../../template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="content">
        <p:panel header="#{msgs.cifGrouping}" closable="true" toggleSpeed="500" closeSpeed="500">

            <!-- Panel untuk form search -->
            <p:panel header="#{msgs.Search}" id="SearchCIFGrouping">
                <h:form id="search">
                    <p:messages/>
                    <h:panelGrid columns="6">
                        <p:outputLabel for="groupcode" value="Kode Kelompok"/>                        
                        <h:outputText value=" : "/>
                        <p:inputText id="groupcode" value="#{group.grouping.groupcode}">
                            <p:ajax event="keyup" update=":search:btnsear" process="@form"/>
                        </p:inputText>
                        <h:outputText/><h:outputText/><h:outputText/>
                        <p:outputLabel for="groupname" value="Nama Kelompok"/>
                        <h:outputText value=" :"/>
                        <p:inputText id="groupname" value="#{group.grouping.groupname}">
                            <p:ajax event="keyup" update=":search:btnsear" process="@form"/>
                        </p:inputText>                        
                        <p:outputLabel for="groupstatus" value="Status Kelompok"/>
                        <h:outputText value=" : "/>
                        <p:selectOneRadio id="groupstatus" value="#{group.grouping.groupstatus}" required="true">
                            <f:selectItem itemLabel="#{msgs.Active}" itemValue="A"/>
                            <f:selectItem itemLabel="#{msgs.NonActive}" itemValue="I"/>
                        </p:selectOneRadio>
                    </h:panelGrid>
                    <p:commandButton value="#{msgs.Search}" actionListener="#{group.search()}" disabled="#{group.grouping.groupcode=='' and group.grouping.groupcode==''}"
                                     id="btnsear" update="@form :list :creategroup :search:btnsear" process="@form"/>
                    <p:spacer width="20"/>
                    <p:commandButton value="#{msgs.Create}" disabled="#{group.buttoncreate}"
                                     update=":creategroup :list" actionListener="#{group.create()}" id="btncreate" process="@this"/>
                </h:form>
            </p:panel>

            <!-- Panel Untuk List Hasil Search -->
            <h:form prependId="false" id="list">
                <p:panel header="#{msgs.GroupingList}" id="tabellist" visible="#{group.tabellistsearch}">
                    <p:dataTable value="#{group.listsearch}" var="list"                       
                                 emptyMessage="#{msgs.Groupnotfound}"
                                 style="text-align: center">                        
                        <p:column headerText="#{msgs.GroupingCode}">
                            <p:commandLink value="#{list.groupcode}" actionListener="#{group.select_group_and_member(list.groupingid)}" action="#{group.grouping.setGroupingid(list.groupingid)}"
                                           update=":viewgroup:dialogviewgroup :addingmember:addmember" oncomplete="varviewgroup.show()"/>
                        </p:column>
                        <p:column headerText="#{msgs.groupType}">
                            <p:commandLink value="#{list.typegroup}" actionListener="#{group.select_group_and_member(list.groupingid)}" action="#{group.grouping.setGroupingid(list.groupingid)}"
                                           update=":viewgroup:dialogviewgroup :addingmember:addmember" oncomplete="varviewgroup.show()"/>
                        </p:column>
                        <p:column headerText="#{msgs.GroupingName}">
                            <p:commandLink value="#{list.groupname}" actionListener="#{group.select_group_and_member(list.groupingid)}" action="#{group.grouping.setGroupingid(list.groupingid)}"
                                           update=":viewgroup:dialogviewgroup :addingmember:addmember" oncomplete="varviewgroup.show()"/>
                        </p:column>
                        <p:column style="width: 100px" headerText="#{msgs.Status}">
                            <p:commandButton icon="ui-icon ui-icon-check" title="#{msgs.Active}" rendered="#{list.groupstatus=='A'}"/>
                            <p:commandButton icon="ui-icon ui-icon-closethick" title="#{msgs.NonActive}" rendered="#{list.groupstatus=='I'}"/>
                        </p:column>
                        <p:column style="width: 150px" headerText="#{msgs.Action}">
                            <p:commandButton icon="ui-icon ui-icon-trash" title="#{msgs.Delete}" oncomplete="varconfirmdeletegroup.show()"
                                             action="#{group.grouping.setGroupingid(list.groupingid)}"/>
                            <p:spacer width="10"/>
                            <p:commandButton icon="ui-icon ui-icon-folder-collapsed" title="#{msgs.Close}" oncomplete="varclosegroup.show()"
                                             disabled="#{list.groupstatus=='I'}"
                                             action="#{group.grouping.setGroupingid(list.groupingid)}"/>
                            <p:spacer width="10"/>
                            <p:commandButton icon="ui-icon ui-icon-folder-open" title="#{msgs.ReOpen}" oncomplete="varreopengroup.show()"
                                             disabled="#{list.groupstatus=='A'}"
                                             action="#{group.grouping.setGroupingid(list.groupingid)}"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>

            <!-- Panel Untuk Buat Kelompok Baru -->
            <h:form prependId="false" id="creategroup">
                <p:panel header="#{msgs.Create}" visible="#{group.formcreate}">                    
                    <p:tabView id="createtab" activeIndex="#{group.indexactivetab}">                        
                        <p:tab title="#{msgs.GroupData}" id="tab1group" disabled="#{group.nilai_index(0)}">
                            <p:messages/>
                            <h:panelGrid columns="4">
                                <p:outputLabel for="GroupType" value="Tipe Kelompok"/>
                                <h:outputText value=" : "/>                            
                                <p:selectOneMenu id="GroupType" label="#{msgs.GroupingType}" value="#{group.grouping.typegroup}"
                                                 required="true" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue=""/>
                                    <f:selectItem itemLabel="Komunitas" itemValue="Komunitas"/>
                                    <f:selectItem itemLabel="Solidaritas" itemValue="Solidaritas"/>
                                </p:selectOneMenu>
                                <p:spacer/>
                                <p:outputLabel for="GroupID" value="Kode Kelompok"/>
                                <h:outputText value=" : "/>
                                <p:inputText id="GroupID" label="#{msgs.GroupingCode}" value="#{group.grouping.groupcode}" validator="#{group.validate_groupcode}"
                                             required="true">
                                    <p:ajax event="blur" update="msggroupcode"/>
                                </p:inputText>
                                <p:message for="GroupID" id="msggroupcode"/>
                                <p:outputLabel for="GroupName" value="Nama Kelompok"/>
                                <h:outputText value=" : "/>
                                <p:inputText id="GroupName" label="#{msgs.GroupingName}" value="#{group.grouping.groupname}" required="true"
                                             validator="#{group.validate_groupname}" maxlength="30">
                                    <p:ajax event="blur" update="msggroupname"/>
                                </p:inputText>
                                <p:message for="GroupName" id="msggroupname"/>
                                <p:outputLabel for="StartDate" value="Tanggal Masuk"/>
                                <h:outputText value=" : "/>
                                <p:calendar id="StartDate" navigator="true" pattern="#{group.applicationManagedBean.systemGlobal.siteFormatdate}" value="#{group.grouping.startdate}"
                                            required="true" label="#{msgs.StartDate}" disabled="true"/>
                                <p:spacer/>
                                <p:outputLabel for="LeaderName" value="Nama Ketua"/>
                                <h:outputText value=" : "/>
                                <p:selectOneMenu id="LeaderName" label="#{msgs.LeaderName}" value="#{group.grouping.customer.customerid}" required="true" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue=""/>
                                    <f:selectItems value="#{group.comboleadername}" var="leadername" itemLabel="#{leadername.customername}" itemValue="#{leadername.customerid}"/>
                                </p:selectOneMenu>
                                <p:spacer/>
                                <p:outputLabel for="Status" value="Status Kelompok"/>
                                <h:outputText value=" : "/>
                                <p:selectOneRadio id="Status" label="#{msgs.Status}" value="#{group.grouping.groupstatus}" required="true" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.Active}" itemValue="A"/>
                                    <f:selectItem itemLabel="#{msgs.NonActive}" itemValue="I"/>
                                </p:selectOneRadio>
                                <p:spacer/>
                                <h:outputText value="#{msgs.Description}"/>
                                <h:outputText value=" : "/>
                                <p:inputTextarea maxlength="200" value="#{group.grouping.description}" autoResize="false"/>
                                <p:spacer/>
                            </h:panelGrid>
                            <p:commandButton value="#{msgs.Next}" action="#{group.nextTab()}" actionListener="#{group.create_group()}" 
                                             update="tab1group :creategroup:createtab :addingmember:addmember" process="tab1group"/>
                            <p:spacer width="650 px" height="0 px"/>
                            <h:outputText value="#{msgs.Note}" style="font-weight: 900"/>
                            <h:outputText value=" : " style="font-weight: 900"/>
                            <h:outputText value="*" style="color: red; font-weight: 900"/>
                            <p:spacer width="5 px" height="0 px"/>
                            <h:outputText value="= #{msgs.MustFilled}" style="font-weight: 900"/> 
                        </p:tab>
                        <p:tab title="#{msgs.AddMember}" id="tab2group" disabled="#{group.nilai_index(1)}">                                                    
                            <p:dataTable rowsPerPageTemplate="10,25,50,100" rows="5" value="#{group.listdatagroupmember}" var="anggota" style="text-align: center"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         id="tablemember">
                                <f:facet name="header">
                                    <p:outputPanel>
                                        <h:outputText value="#{msgs.Search} : "/>
                                        <p:inputText id="globalFilter" onkeyup="L.filter()" style="width:150px" />
                                    </p:outputPanel>
                                </f:facet>
                                <p:column headerText="#{msgs.customernumber}">                                    
                                    <h:outputText value="#{anggota.customer.customercode}" rendered="#{anggota.groupmember.memberstatus==true}"/>
                                    <h:outputText value="---" rendered="#{anggota.groupmember.memberstatus==false}"/>
                                </p:column>
                                <p:column headerText="#{msgs.MemberName}">                                    
                                    <h:outputText value="#{anggota.customer.customername}" rendered="#{anggota.groupmember.memberstatus==true}"/>                                    
                                    <h:outputText value="#{anggota.customerGroupnonmember.membername}" rendered="#{anggota.groupmember.memberstatus==false}"/>
                                </p:column>
                                <p:column headerText="#{msgs.memberstatus}">
                                    <h:outputText value="Nasabah" rendered="#{anggota.groupmember.memberstatus==true}"/>
                                    <h:outputText value="Bukan Nasabah" rendered="#{anggota.groupmember.memberstatus==false}"/>
                                </p:column>
                                <p:column headerText="#{msgs.Action}">
                                    <p:commandButton icon="ui-icon ui-icon-trash" title="#{msgs.Delete}" oncomplete="confirmdialog_deletmember_ingroupcreate1.show()"
                                                     rendered="#{anggota.groupmember.memberstatus==true}"
                                                     action="#{group.grouping.groupmember.setGroupmemberid(anggota.groupmember.groupmemberid)}"
                                                     process="@this"/>
                                    <p:commandButton icon="ui-icon ui-icon-trash" title="#{msgs.Delete}" oncomplete="confirmdialog_deletmember_ingroupcreate2.show()"
                                                     rendered="#{anggota.groupmember.memberstatus==false}"
                                                     action="#{group.grouping.groupmember.setGroupmemberid(anggota.groupmember.groupmemberid)}"
                                                     process="@this"/>
                                </p:column>
                                <f:facet name="footer">
                                    <p:commandButton icon="ui-icon ui-icon-plusthick" title="#{msgs.Add}" actionListener="#{group.find_combo_member()}" action="#{group.setViewmember(false)}"
                                                     update=":addingmember:paneladdmember_customer :addingmember:paneladdmember :addingmember:btncreatenoncustomer" process="@this" oncomplete="dialogaddmember.show()"/>
                                </f:facet>
                            </p:dataTable>                            
                        </p:tab>
                    </p:tabView>                    

                    <!-- Pop up untuk pertanyaan konfirmasi hapus member (nasabah) -->
                    <p:confirmDialog message="#{msgs.Areyousureyouwanttoremovethismember}?" severity="alert" widgetVar="confirmdialog_deletmember_ingroupcreate1">
                        <p:commandButton value="#{msgs.yes}" onclick="confirmdialog_deletmember_ingroupcreate1.hide(),confirmdialog_success_deletmember_ingroupcreate.show()"
                                         actionListener="#{group.execution_delete_member_customer_group()}" immediate="true"/>
                        <p:commandButton value="#{msgs.no}" onclick="confirmdialog_deletmember_ingroupcreate1.hide()"/>
                    </p:confirmDialog>

                    <!-- Pop up untuk pertanyaan konfirmasi hapus member (non nasabah) -->
                    <p:confirmDialog message="#{msgs.Areyousureyouwanttoremovethismember}?" severity="alert" widgetVar="confirmdialog_deletmember_ingroupcreate2">
                        <p:commandButton value="#{msgs.yes}" onclick="confirmdialog_deletmember_ingroupcreate2.hide(),confirmdialog_success_deletmember_ingroupcreate.show()"
                                         actionListener="#{group.execution_delete_member_noncustomer_group()}" immediate="true"/>
                        <p:commandButton value="#{msgs.no}" onclick="confirmdialog_deletmember_ingroupcreate2.hide()"/>
                    </p:confirmDialog>

                    <!-- Pop up untuk konfirmasi berhasil hapus -->
                    <p:confirmDialog message="#{msgs.Youhavebeenremoveamemberofthisgroup}" severity="alert" widgetVar="confirmdialog_success_deletmember_ingroupcreate">                                
                        <p:commandButton value="Ok" onclick="confirmdialog_success_deletmember_ingroupcreate.hide()" update=":creategroup:createtab:tablemember" immediate="true"/>
                    </p:confirmDialog>
                </p:panel>
            </h:form>

            <!-- Panel Untuk Deskripsi Kelompok -->
            <h:form prependId="false" id="viewgroup">
                <p:dialog header="#{msgs.GroupDescription}" widgetVar="varviewgroup" id="dialogviewgroup" modal="false">                    
                    <p:tabView id="viewtab">
                        <p:tab title="#{msgs.GroupData}" id="tabviewdatagroup">
                            <h:panelGrid columns="2">
                                <h:outputText value="#{msgs.GroupingType}"/> 
                                <p:inputText disabled="true" value="#{group.grouping.typegroup}"/>  
                                <h:outputText value="#{msgs.GroupingCode} "/>  
                                <p:inputText disabled="true" value="#{group.grouping.groupcode}"/> 
                                <h:outputText value="#{msgs.GroupingName}"/>  
                                <p:inputText disabled="true" value="#{group.grouping.groupname}"/> 
                                <h:outputText value="#{msgs.StartDate}"/>  
                                <p:inputText disabled="true" value="#{group.grouping.startdate}"/>
                                <h:outputText value="#{msgs.LeaderName}"/>  
                                <p:inputText disabled="true" value="#{group.grouping.customer.customername}"/>
                                <h:outputText value="#{msgs.Status}"/>
                                <p:inputText disabled="true" value="#{group.grouping.statusName}"/>
                                <h:outputText value="#{msgs.Description}"/>  
                                <p:inputText disabled="true" value="#{group.grouping.description}"/>
                            </h:panelGrid>
                            <p:commandButton value="#{msgs.Exit}" oncomplete="varviewgroup.hide()"/>
                        </p:tab>
                        <p:tab title="#{msgs.GroupMember}" id="tabviewdatamembergroup">
                            <p:dataTable rowsPerPageTemplate="10,25,50,100" id="viewtabelmembergroup" rows="5" value="#{group.listdatagroupmember}" var="anggota"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         style="text-align: center">
                                <f:facet name="header">
                                    <p:outputPanel>
                                        <h:outputText value="#{msgs.Search} : "/>
                                        <p:inputText onkeyup="mL.filter()"/>
                                    </p:outputPanel>
                                </f:facet>
                                <p:column headerText="#{msgs.MemberName}">                                     
                                    <h:outputText value="#{anggota.customer.customername}" rendered="#{anggota.groupmember.memberstatus==true}"/>
                                    <h:outputText value="#{anggota.customerGroupnonmember.membername}" rendered="#{anggota.groupmember.memberstatus==false}"/>
                                </p:column>
                                <p:column headerText="#{msgs.memberstatus}">
                                    <h:outputText value="Nasabah" rendered="#{anggota.groupmember.memberstatus==true}"/>
                                    <h:outputText value="Bukan Nasabah" rendered="#{anggota.groupmember.memberstatus==false}"/>
                                </p:column>
                                <p:column>
                                    <p:commandButton icon="ui-icon ui-icon-search" title="#{msgs.view}" actionListener="#{group.check_memberstatus_for_description1(anggota.groupmember.groupmemberid)}"
                                                     rendered="#{anggota.groupmember.memberstatus==true}" oncomplete="viewdescriptionmembercustomer.show()" action="#{group.setViewmember(true)}"
                                                     update=":viewmembercustomer:idviewdescriptionmembercustomer"/>
                                    <p:commandButton icon="ui-icon ui-icon-search" title="#{msgs.view}" actionListener="#{group.check_memberstatus_for_description2(anggota.groupmember.groupmemberid)}"
                                                     rendered="#{anggota.groupmember.memberstatus==false}" oncomplete="viewdescriptionmembernoncustomer.show()" action="#{group.setViewmember(true)}"
                                                     update=":viewmembernoncustomer:idviewdescriptionmembernoncustomer"/>
                                </p:column>
                                <p:column headerText="#{msgs.Action}">
                                    <p:commandButton icon="ui-icon ui-icon-trash" title="#{msgs.Delete}"
                                                     action="#{group.grouping.groupmember.setGroupmemberid(anggota.groupmember.groupmemberid)}" 
                                                     oncomplete="dialogviewdeletemember.show()"
                                                     process="@this"/>
                                </p:column>
                                <f:facet name="footer">
                                    <p:commandButton icon="ui-icon ui-icon-plusthick" title="#{msgs.Add}" actionListener="#{group.find_combo_member()}" action="#{group.setViewmember(false)}"
                                                     update=":addingmember:paneladdmember_customer :addingmember:paneladdmember :addingmember:btncreatenoncustomer" process="@this" onclick="dialogaddmember.show()"/>
                                </f:facet>
                            </p:dataTable>
                            <p:commandButton value="#{msgs.Exit}" oncomplete="varviewgroup.hide()"/>
                        </p:tab>
                    </p:tabView>
                </p:dialog>                

                <!-- Panel untuk pertanyaan konfirmasi hapus member -->
                <p:confirmDialog message="#{msgs.Areyousureyouwanttoremovethismember}?" severity="alert" widgetVar="dialogviewdeletemember">
                    <p:commandButton value="#{msgs.yes}" oncomplete="dialogdeletemembernote.show(), dialogviewdeletemember.hide()"/>
                    <p:commandButton value="#{msgs.no}" onclick="cHapusMember.hide()"/>
                </p:confirmDialog>

                <!-- Panel untuk masukin catatan hapus member -->
                <p:dialog widgetVar="dialogdeletemembernote" id="dialogHapusMember" header="#{msgs.DeleteMember}">                    
                    <h:panelGrid columns="3">
                        <h:outputText value="#{msgs.Description}"/>
                        <h:outputText value=" :"/>
                        <p:selectOneMenu value="#{group.grouping.reason.reasonid}">
                            <f:selectItem itemLabel="#{msgs.Description}" itemValue="0"/>
                            <f:selectItems value="#{group.listreasondeletemembergroup}" var="deletemember"
                                           itemLabel="#{deletemember.reason}" itemValue="#{deletemember.reasonid}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton value="#{msgs.Submit}" actionListener="#{group.execution_delete_allmember_group()}" oncomplete="confirmviewdeletemember.show(),dialogdeletemembernote.hide()"/>                    
                </p:dialog>

                <!-- Panel untuk konfirmasi hapus member -->
                <p:confirmDialog message="#{msgs.Youhavebeenremoveamemberofthisgroup}" severity="alert" widgetVar="confirmviewdeletemember">
                    <p:commandButton value="Ok" oncomplete="confirmviewdeletemember.hide()" update=":viewgroup:viewtab:viewtabelmembergroup"
                                     immediate="true"/>
                </p:confirmDialog>                                                
            </h:form>

            <!-- Form untuk tambah member -->
            <h:form prependId="false" id="addingmember">
                <!-- Pop up untuk tambah member -->
                <p:dialog widgetVar="dialogaddmember" id="addmember" closable="true" modal="true" position="center" header="#{msgs.AddMember}">                    
                    <h:panelGrid columns="3">
                        <p:commandButton value="#{msgs.addcustomer}" action="#{group.setPaneladdmember_customer(true)}"
                                         update=":addingmember:paneladdmember" immediate="true"/>
                        <p:spacer width="20px"/>
                        <p:commandButton value="#{msgs.addnoncustomer}" id="btncreatenoncustomer" action="#{group.setPaneladdmember_noncustomer(true)}"
                                         update=":addingmember:paneladdmember" immediate="true"
                                         disabled="#{group.grouping.typegroup=='Solidaritas'}"/>
                    </h:panelGrid>
                    <p:separator/>
                    <p:panel id="paneladdmember" style="border-color: white">
                        <p:panel id="paneladdmember_customer" visible="#{group.paneladdmember_customer}">
                            <h:panelGrid columns="3">
                                <h:outputText value="#{msgs.MemberName}"/>
                                <p:selectOneMenu value="#{group.group.customer.customerid}" id="combo2member" style="width: 135px" >
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                    <f:selectItems value="#{group.combotambahanggota}" var="member" itemLabel="#{member.customername}" itemValue="#{member.customerid}"/>
                                    <p:ajax listener="#{group.cek_customernumber(group.group.customer.customerid)}" update=":addingmember:custcode"/>
                                </p:selectOneMenu>
                                <p:message id="msg2membername" for="combo2member"/>
                                <h:outputText value="#{msgs.customernumber}"/>
                                <p:inputText disabled="true" id="custcode" value="#{group.customer.customercode}"/>
                                <h:outputText/>
                                <p:commandButton value="#{msgs.Add}" actionListener="#{group.insert_member_to_group()}" immediate="true" update=":creategroup:createtab:tablemember :viewgroup:viewtab custcode" onclick="dialogaddmember.hide()"/>
                            </h:panelGrid>
                        </p:panel>
                        <p:panel id="paneladdmember_noncustomer" visible="#{group.paneladdmember_noncustomer}">
                            <h:panelGrid columns="7">

                                <h:outputText value="#{msgs.customername}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.membername}"/><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.placeofbirth}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.placeofbirth}"/><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.dateofbirth}*"/><h:outputText value=" :"/>
                                <p:calendar navigator="true" pattern="#{group.applicationManagedBean.systemGlobal.siteFormatdate}" value="#{group.group.customerGroupnonmember.dateofbirth}" yearRange="c-50:c-10"/>
                                <p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.socialsecuritynumber}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.socialsecuritynumber}"/><p:spacer width="20px"/>
                                <h:outputText value="#{msgs.phonearea}"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.phonearea}"/>

                                <h:outputText value="#{msgs.drivinglicensenumber}"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.drivinglicencenumber}"/><p:spacer width="20px"/>
                                <h:outputText value="#{msgs.phonenumber}"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.phonenumber}"/>

                                <h:outputText value="#{msgs.address}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.address}"/><p:spacer width="20px"/>
                                <h:outputText value="#{msgs.mobilephonenumber}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.mobilenumber}"/>

                                <h:outputText value="#{msgs.province}*"/><h:outputText value=" :"/>
                                <p:selectOneMenu value="#{group.group.village.subDistrict.district.province.provinceid}" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                    <f:selectItems value="#{group.listcomboprovince}" var="provinsi" 
                                                   itemLabel="#{provinsi.village.subDistrict.district.province.provincename}"
                                                   itemValue="#{provinsi.village.subDistrict.district.province.provinceid}"/>
                                    <p:ajax update=":addingmember:combodistrict"/>
                                </p:selectOneMenu><p:spacer width="20px"/>

                                <h:outputText value="#{msgs.email}"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.email}"/>

                                <h:outputText value="#{msgs.district}*"/><h:outputText value=" :"/>
                                <p:selectOneMenu id="combodistrict" value="#{group.group.village.subDistrict.district.districtid}" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                    <f:selectItems value="#{group.listcombodistrict}" var="kabupaten" 
                                                   itemLabel="#{kabupaten.village.subDistrict.district.districtname}"
                                                   itemValue="#{kabupaten.village.subDistrict.district.districtid}"/>
                                    <p:ajax update=":addingmember:combosubdistrict"/>
                                </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.subdistrict}*"/><h:outputText value=" :"/>
                                <p:selectOneMenu id="combosubdistrict" value="#{group.group.village.subDistrict.subdistrictid}" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                    <f:selectItems value="#{group.listcombosubdistrict}" var="kecamatan" itemLabel="#{kecamatan.village.subDistrict.subdistrictname}"
                                                   itemValue="#{kecamatan.village.subDistrict.subdistrictid}"/>
                                    <p:ajax update=":addingmember:combovillage"/>
                                </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.village}*"/><h:outputText value=" :"/>
                                <p:selectOneMenu id="combovillage" value="#{group.group.village.villageid}" style="width: 135px">
                                    <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                                    <f:selectItems value="#{group.listcombovillage}" var="desa" itemLabel="#{desa.village.villagename}"
                                                   itemValue="#{desa.village.villageid}"/>                                    
                                </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                                <h:outputText value="#{msgs.postcode}*"/><h:outputText value=" :"/>
                                <p:inputText value="#{group.group.customerGroupnonmember.postcode}"/><p:spacer width="20px"/>
                                <h:outputText/><h:outputText/><h:outputText/>

                                <p:commandButton value="#{msgs.add}" actionListener="#{group.insert_member_noncustomer_to_group()}"
                                                 update=":addingmember:paneladdmember_noncustomer,:creategroup:createtab:tablemember,:viewgroup:viewtab:tabviewdatamembergroup,paneladdmember_noncustomer"
                                                 oncomplete="dialogaddmember.hide()" process="@form"/>                                
                            </h:panelGrid>
                        </p:panel>
                    </p:panel>
                </p:dialog>
            </h:form>

            <!-- Form untuk liat deskripsi anggota (nasabah) -->
            <h:form prependId="false" id="viewmembercustomer">
                <p:dialog widgetVar="viewdescriptionmembercustomer" id="idviewdescriptionmembercustomer" header="#{msgs.memberdescription}">
                    <p:panelGrid columns="3">
                        <h:outputText value="#{msgs.customernumber}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customer.customercode}" disabled="true"/>
                        <h:outputText value="#{msgs.customername}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customer.customername}" disabled="true"/>
                    </p:panelGrid>
                </p:dialog>
            </h:form>

            <!-- Form untuk liat deskripsi anggota (bukan nasabah) -->
            <h:form prependId="false" id="viewmembernoncustomer">
                <p:dialog widgetVar="viewdescriptionmembernoncustomer" id="idviewdescriptionmembernoncustomer" header="#{msgs.memberdescription}">
                    <h:panelGrid columns="7" style="border-color: white">
                        <h:outputText value="#{msgs.customername}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.membername}" disabled="true"/>
                        <p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.placeofbirth}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.placeofbirth}" disabled="true"/><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.dateofbirth}"/><h:outputText value=" :"/>
                        <p:calendar navigator="true" pattern="#{group.applicationManagedBean.systemGlobal.siteFormatdate}" value="#{group.grouping.customerGroupnonmember.dateofbirth}" disabled="true"/>
                        <p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.socialsecuritynumber}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.socialsecuritynumber}" disabled="true"/><p:spacer width="20px"/>
                        <h:outputText value="#{msgs.phonearea}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.phonearea}" disabled="true"/>

                        <h:outputText value="#{msgs.drivinglicensenumber}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.drivinglicencenumber}" disabled="true"/><p:spacer width="20px"/>
                        <h:outputText value="#{msgs.phonenumber}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.phonenumber}" disabled="true"/>

                        <h:outputText value="#{msgs.address}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.address}" disabled="true"/><p:spacer width="20px"/>
                        <h:outputText value="#{msgs.mobilephonenumber}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.mobilenumber}" disabled="true"/>

                        <h:outputText value="#{msgs.province}"/><h:outputText value=" :"/>
                        <p:selectOneMenu value="#{group.grouping.village.subDistrict.district.province.provinceid}" style="width: 135px" disabled="true">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listcomboprovince}" var="provinsi" 
                                           itemLabel="#{provinsi.village.subDistrict.district.province.provincename}"
                                           itemValue="#{provinsi.village.subDistrict.district.province.provinceid}"/>
                            <p:ajax update=":viewmembernoncustomer:combodistrict1"/>
                        </p:selectOneMenu><p:spacer width="20px"/>

                        <h:outputText value="#{msgs.email}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.email}" disabled="true"/>

                        <h:outputText value="#{msgs.district}"/><h:outputText value=" :"/>
                        <p:selectOneMenu id="combodistrict1" value="#{group.grouping.village.subDistrict.district.districtid}" style="width: 135px" disabled="true">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listcombodistrict}" var="kabupaten" 
                                           itemLabel="#{kabupaten.village.subDistrict.district.districtname}"
                                           itemValue="#{kabupaten.village.subDistrict.district.districtid}"/>
                            <p:ajax update=":viewmembernoncustomer:combosubdistrict1"/>
                        </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.subdistrict}"/><h:outputText value=" :"/>
                        <p:selectOneMenu id="combosubdistrict1" value="#{group.grouping.village.subDistrict.subdistrictid}" style="width: 135px" disabled="true">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listcombosubdistrict}" var="kecamatan" itemLabel="#{kecamatan.village.subDistrict.subdistrictname}"
                                           itemValue="#{kecamatan.village.subDistrict.subdistrictid}"/>
                            <p:ajax update=":viewmembernoncustomer:combovillage1"/>
                        </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.village}"/><h:outputText value=" :"/>
                        <p:selectOneMenu id="combovillage1" value="#{group.grouping.customerGroupnonmember.villageid}" style="width: 135px" disabled="true">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listcombovillage}" var="desa" itemLabel="#{desa.village.villagename}"
                                           itemValue="#{desa.village.villageid}"/>                                    
                        </p:selectOneMenu><p:spacer width="20px"/><h:outputText/><h:outputText/><h:outputText/>

                        <h:outputText value="#{msgs.postcode}"/><h:outputText value=" :"/>
                        <p:inputText value="#{group.grouping.customerGroupnonmember.postcode}" disabled="true"/><p:spacer width="20px"/>
                        <h:outputText/><h:outputText/><h:outputText/>
                    </h:panelGrid>
                </p:dialog>
            </h:form>

            <!-- Panel untuk pertanyaan confirmasi hapus kelompok -->
            <h:form prependId="false" id="formconfirmdeletegroup">
                <p:confirmDialog message="#{msgs.Areyousureyouwanttoremovethisgroup}?" severity="alert" widgetVar="varconfirmdeletegroup">
                    <p:commandButton value="Ya" oncomplete="varreasondeletegroup.show(), varconfirmdeletegroup.hide()"/>
                    <p:commandButton value="Tidak" onclick="varconfirmdeletegroup.hide()"/>
                </p:confirmDialog>
            </h:form>

            <!-- Panel untuk masukin catatan hapus kelompok -->
            <h:form prependId="false" id="formreasondeletegroup">                
                <p:dialog header="#{msgs.Note}" id="idreasondeletegroup" widgetVar="varreasondeletegroup">                    
                    <h:panelGrid columns="3">                        
                        <h:outputText value="#{msgs.Note}"/>
                        <h:outputText value=" :"/>
                        <p:selectOneMenu value="#{group.grouping.customeropenclose.describe}">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listreasondeletegroup}" var="alasanhapuskelompok"
                                           itemLabel="#{alasanhapuskelompok.reason}" itemValue="#{alasanhapuskelompok.reasonid}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton value="Ok" onclick="confirmdeletegroupsuccess.show(),varreasondeletegroup.hide()"
                                     actionListener="#{group.execution_delete_group()}" update=":list:tabellist"
                                     action="#{group.setTabellistsearch(false)}"/>
                </p:dialog>
            </h:form>

            <!-- Panel untuk konfirmasi hapus -->
            <h:form prependId="false">
                <p:confirmDialog message="#{msgs.Youhavebeenremoveagroup}" severity="alert" widgetVar="confirmdeletegroupsuccess">
                    <p:commandButton value="Ok" oncomplete="confirmdeletegroupsuccess.hide()"/>
                </p:confirmDialog>
            </h:form>

            <!-- Panel untuk masukin catatan tutup kelompok -->
            <h:form prependId="false" id="formreasonclosegroup">
                <p:dialog widgetVar="varclosegroup" id="idclosegroup" header="#{msgs.Close}">                    
                    <h:panelGrid columns="3">
                        <h:outputText value="#{msgs.Description}" style="width: 100px"/>
                        <h:outputText value=" :"/>
                        <p:selectOneMenu value="#{group.grouping.customeropenclose.describe}">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listreasonclosegroup}" var="alasantutupkelompok"
                                           itemLabel="#{alasantutupkelompok.reason}" itemValue="#{alasantutupkelompok.reasonid}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton value="#{msgs.Submit}" oncomplete="confirmclosegroupsuccess.show(),varclosegroup.hide()"
                                     actionListener="#{group.execution_close_group()}" update=":list:tabellist"
                                     action="#{group.setTabellistsearch(false)}"/>
                </p:dialog>
            </h:form>

            <!-- Panel untuk konfirmasi tutup -->
            <h:form prependId="false">
                <p:confirmDialog message="#{msgs.Youhavebeencloseagroup}" severity="alert" widgetVar="confirmclosegroupsuccess">
                    <p:commandButton value="Ok" oncomplete="confirmclosegroupsuccess.hide()"/>
                </p:confirmDialog>
            </h:form>

            <!-- Panel untuk masukin catatan buka kelompok -->
            <h:form prependId="false" id="formreasonreopengroup">
                <p:dialog widgetVar="varreopengroup" id="idreopengroup" header="#{msgs.ReOpen}">                    
                    <h:panelGrid columns="3">
                        <h:outputText value="#{msgs.Description}" style="width: 100px"/>
                        <h:outputText value=" :"/>
                        <p:selectOneMenu value="#{group.grouping.customeropenclose.describe}">
                            <f:selectItem itemLabel="#{msgs.ChooseOne}" itemValue="0"/>
                            <f:selectItems value="#{group.listreasonreopengroup}" var="alasanreopenkelompok"
                                           itemLabel="#{alasanreopenkelompok.reason}" itemValue="#{alasanreopenkelompok.reasonid}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:commandButton value="#{msgs.Submit}" oncomplete="confirmreopengroupsuccess.show(),varreopengroup.hide()"
                                     actionListener="#{group.execution_reopen_group()}" update=":list:tabellist"
                                     action="#{group.setTabellistsearch(false)}"/>
                </p:dialog>
            </h:form>

            <!-- Panel untuk konfirmasi buka -->
            <h:form prependId="false">
                <p:confirmDialog message="#{msgs.Youhavebeenreopenagroup}" severity="alert" widgetVar="confirmreopengroupsuccess">
                    <p:commandButton value="Ok" oncomplete="confirmreopengroupsuccess.hide()"/>
                </p:confirmDialog>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>
